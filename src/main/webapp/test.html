
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Accordion and Tab Problem</title>

<!-- load the UI stylesheet AFTER Layout stylesheet so widget-styles will override default pane-styles -->
<link rel="stylesheet" type="text/css" href="http://layout.jquery-dev.net/lib/css/layout-default-latest.css"/>
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.11.0/themes/ui-lightness/jquery-ui.css"/>
<link href="./css/jquery.gritter.css" rel="stylesheet"/>
<style type="text/css">
    .add-scrollbar	{ overflow:	auto !important; }
    .no-scrollbar	{ overflow:	hidden !important; }
    .no-padding		{ padding:	0 !important; }
    .container,
    .tab-panels-wrapper {
        border-width:	0;
        background:		none;
        padding:		0;
        overflow:		hidden;
    }
    .tab-panels-wrapper > .ui-tabs-panel {
        height:		100%;
        padding:	5px;
        -moz-box-sizing:	border-box; /* allows 'padding' inside panels when using height=100% */
        -webkit-box-sizing:	border-box;
        box-sizing:			border-box;
    }
    /* cosmetics - remove some pane borders */
    body > .ui-layout-pane-north,
    body > .ui-layout-pane-south {
        border:		none;
    }

</style>

</head>
<body>

<div id="headerDiv" class="ui-layout-north no-scrollbar">
    <button class="navbar-toggle collapsed" type="button" data-toggle="collapse"
            data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    <img height="45" src="./img/cube-logo.png"/><a class="navbar-brand" href="#">Configuration Editor</a>
</div>

<div id="outerCenterDiv" class="ui-layout-center container">

    <div id="workAreaDiv" class="ui-layout-center container">

        <div id="commandAreaDiv" class="ui-layout-center container">
            <ul id="navTabsDiv" class="ui-layout-north" style="overflow: visible;">
                <li id="navTab_1"><a href="#Tab1Div" title="Tab1Div"> <span>Tab 1</span></a></li>
                <li id="navTab_2"><a href="#Tab2Div" title="Tab2Div"> <span>Tab 2</span></a></li>
                <li id="navTab_3"><a href="#Tab3Div" title="Tab3Div"> <span>Tab 3</span></a></li>
            </ul><!-- div navTabs -->
            <div class="ui-layout-center tab-panels-wrapper">
                <div id="Tab1Div" class="container">
                    <div id="Tab1AccordionDiv">
                        <h3 id="Tab1AccordionHeading1" ><a href="#">Tab1 Accordion1 Heading</a></h3>
                        <div id="Tab1Accordion1Div">
                            Tab1 Accordion1 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                        <h3 id="Tab1AccordionHeading2" ><a href="#">Tab1 Accordion2 Heading</a></h3>
                        <div id="Tab1Accordion2Div">
                            Tab1 Accordion2 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                    </div>
                </div>
                <div id="Tab2Div" class="container">
                    <div id="Tab2AccordionDiv">
                        <h3 id="Tab2AccordionHeading1" ><a href="#">Tab2 Accordion1 Heading</a></h3>
                        <div id="Tab2Accordion1Div">
                            Tab2 Accordion1 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                        <h3 id="Tab2AccordionHeading2" ><a href="#">Tab2 Accordion2 Heading</a></h3>
                        <div id="Tab2Accordion2Div">
                            Tab2 Accordion2 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                    </div>
                </div>
                <div id="Tab3Div" class="container">
                    <div id="Tab3AccordionDiv">
                        <h3 id="Tab3AccordionHeading1" ><a href="#">Tab3 Accordion1 Heading</a></h3>
                        <div id="Tab3Accordion1Div">
                            Tab3 Accordion1 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                        <h3 id="Tab3AccordionHeading2" ><a href="#">Tab3 Accordion2 Heading</a></h3>
                        <div id="Tab3Accordion2Div">
                            Tab3 Accordion2 Contents<p>.</p><p>.</p><p>.</p><p>.</p><p>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- div commandArea -->

        <div id="detailAreaDiv" class="ui-layout-south">
            detail Area
            <p>...</p><p>...</p><p>...</p><p>...</p><p>...</p><p>...</p><p>...</p><p>...</p><p>...</p>
        </div>

    </div>  <!-- div workArea -->

    <div id="logAreaDiv" class="ui-layout-south">log message div  </div>

</div>


<div id="westDiv" class="ui-layout-west">
    <span>West Div</span>
</div>

<!-- This area currently unused -->
<div id="hiddenEastDiv" class="ui-layout-east">Hide Me! East</div>

<div id="footerDiv" class="ui-layout-south no-scrollbar">
    <span>Footer Div</span>
</div>


<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://layout.jquery-dev.net/lib/js/jquery.layout-latest.js"></script>
<script type="text/javascript" src="http://layout.jquery-dev.net/lib/js/jquery.layout.resizeTabLayout-latest.js"></script>
<script type="text/javascript" src="http://layout.jquery-dev.net/lib/js/jquery.layout.resizePaneAccordions-latest.js"></script>

<script type="text/javascript">

    // Do this after the document loads
    $(document).ready(function () {

        var clientLayout = $('body').layout({
            //	reference only - these options are NOT required because 'true' is the default
            closable:				true	// pane can open & close
            ,	resizable:				true	// when open,	pane can be resized
            ,	slidable:				true	// when closed,	pane can 'slide' open over other panes - closes on mouse-out
            ,	livePaneResizing:		true

            // set Header pane behavior
            ,	north__paneSelector:	"#headerDiv"
            ,	north__size: 			"auto" // auto is desired but it messes up the rest of the format (why?)
            ,	north__resizable: 		false // fixed size
            ,	north__closable: 		false  // pane is always open
            ,	north__spacing_open:	0	// no resizer-bar when open (zero height)

            // set Footer pane behavior
            ,	south__paneSelector:	"#footerDiv"
            ,	south__size: 			40 // fixed size
            ,	south__resizable: 		false // fixed size
            ,	south__closable: 		false  // pane is always open
            ,	south__spacing_open:	0	// no resizer-bar when open (zero height)

            // set west pane behavior
            ,	west__paneSelector: 	"#westDiv"
            ,	west__size: 			200 // default size
            ,	west__maxSize: 			300 // maximum size
            ,	west__resizable: 		true // fixed size
            ,	west__onresize:			$.layout.callbacks.resizePaneAccordions // west accordion a child of pane

            // set East pane behavior (not used for now)
            ,	east__paneSelector: 	"#hiddenEastDiv"
            ,	east__initClosed: 		true
            ,	east__initHidden: 		true

            ,	center__paneSelector:   "#outerCenterDiv"

            // set Center pane behavior (Commands,	Details,	Logs...)
            // MIDDLE-LAYOUT (child of outer-center-pane)
            ,	center__childOptions: {
                name:					"middleLayout"

                ,	center__paneSelector:   "#workAreaDiv"
                ,	south__paneSelector:	"#logAreaDiv"
                ,	spacing_open:			8  // ALL panes
                ,	spacing_closed:			12 // ALL panes

                // set LogsNotifications pane behavior
                ,	south__size: 			40 // initial size
                ,	south__resizable: 		true
                ,	south__minSize: 		40
                //,	south__closable: 		false  // pane is always open
                ,	south__closable: 		true  // pane is always open
                ,	south__spacing_open:	8

                // set Command/Detail pane behavior
                // Inner COMMAND/DETAIL (child of workArea pane)
                ,	center__childOptions: {
                    name:					"commandLayout"
                    ,	south__paneSelector:	"#detailAreaDiv"
                    ,	spacing_open:			8  // ALL panes
                    ,	spacing_closed:			12 // ALL panes
                    ,	center__paneSelector:   "#commandAreaDiv"

                    //	inner-layout to wrap tab-buttons & tab-panels
                    ,	center__childOptions: {
                        name:				"commandTabsLayout"
                        ,	resizable:			false
                        ,	closable:			false
                        ,	spacing_open:		0
                        ,	center__onresize:  	$.layout.callbacks.resizePaneAccordions
                    }

                    // set Detail Area pane behavior
                    ,	south__size: 			200 // initial size
                    ,	south__resizable: 		true
                    ,	south__closable: 		true
                    ,	south__spacing_open:	8
                    ,	south__spacing_closed:  12

                } // end command/detail areas
            } // end work&log areas

        });  // clientLayout


        // INIT ALL ACCORDIONS - EVEN THOSE NOT VISIBLE
        // Note:  accordions within the tabs must be created before the tabs for autosizing to work right
        $("#Tab1AccordionDiv").accordion({
            heightStyle: "fill"
        });
        $("#Tab2AccordionDiv").accordion({
            heightStyle: "fill"
        });
        $("#Tab3AccordionDiv").accordion({
            heightStyle: "fill"
        });

        $("#Tab1AccordionDiv").bind( "accordionchange",	function(event,	ui) {
            // depending which accordion heading was selected,	do something that loads dynamic content
            // into the corresponding accordion div
            //alert('Tab1Accordions changed');
        });
        $("#Tab2AccordionDiv").bind( "accordionchange",	function(event,	ui) {
            // depending which accordion heading was selected,	do something that loads dynamic content
            // into the corresponding accordion div
            //alert('Tab2Accordions changed');
        });
        $("#Tab3AccordionDiv").bind( "accordionchange",	function(event,	ui) {
            // depending which accordion heading was selected,	do something that loads dynamic content
            // into the corresponding accordion div
            //alert('Tab3Accordions changed');
        });

        // make the tabs
        $("#commandAreaDiv").tabs({
            // adjust the layout of accordions when the tabs are selected
            activate:		$.layout.callbacks.resizePaneAccordions
            ,	beforeActivate: function (evt, ui) {
                //console.log( ui, 'ui' );
                var tabId = ui.newTab.attr('id');
                switch ( tabId ) {

                    case 'navTab_1':	// 1st TAB
                        console.log( tabId +' clicked');
                        break;

                    case 'navTab_2':	// 2ND TAB
                        console.log( tabId +' clicked');
                        break;

                    case 'navTab_3':	// 3RD TAB
                        console.log( tabId +' clicked');
                        break;
                }
            }
        });
        // resize the tabs layout after creating the tabs
        clientLayout
                .center.children.middleLayout
                .center.children.commandLayout
                .center.children.commandTabsLayout
                .resizeAll(); // resize ONLY the tabs-wrapper layout - faster!

        /*
         $("#commandAreaDiv").resize( function() {
         alert ('commandAreaDiv resize');
         $.layout.callbacks.resizePaneAccordions;
         });
         $("#commandAreaDiv").show( function() {
         alert ('commandAreaDiv show');
         $.layout.callbacks.resizePaneAccordions;
         });

         $("#workAreaDiv").resize( function() {
         alert ('workAreaDiv resize');
         $.layout.callbacks.resizePaneAccordions;
         });
         $("#workAreaDiv").show( function() {
         alert ('workAreaDiv show');
         $.layout.callbacks.resizePaneAccordions;
         });
         $("#outerCenterDiv").resize( function() {
         alert ('outerCenterDiv resize');
         $.layout.callbacks.resizePaneAccordions;
         });
         $("#outerCenterDiv").show( function() {
         alert ('outerCenterDiv show');
         $.layout.callbacks.resizePaneAccordions;
         });
         */

        // CALLBACKS
        // Callbacks related to the command navigation tabs
        /* =========================================================================================
         *	NOTE: use the Tabs beforeActivate event instead so that timing can be controlled properly
         * =========================================================================================
         $('#navTab_1').click(function() {
         // do stuff that loads dynamic content into the accordions within this tab pane and other panes
         });
         $('#navTab_2').click(function() {
         // do stuff that loads dynamic content into the accordions within this tab pane and other panes
         });
         $('#navTab_3').click(function() {
         // do stuff that loads dynamic content into the accordions within this tab pane and other panes
         });
         */

    }); // document ready

</script>


</body>
</html>
